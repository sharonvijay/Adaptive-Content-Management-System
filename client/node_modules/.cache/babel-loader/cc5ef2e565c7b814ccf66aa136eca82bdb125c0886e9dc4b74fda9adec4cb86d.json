{"ast":null,"code":"import _objectSpread from\"D:/DBMS-PROJECT/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/DBMS-PROJECT/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/DBMS-PROJECT/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/DBMS-PROJECT/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{TextField,Button,Typography,Paper}from'@material-ui/core';import{useDispatch,useSelector}from'react-redux';import FileBase from'react-file-base64';import useStyles from'./styles';import{createPost,updatePost}from'../../actions/posts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(_ref){var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({creator:'',title:'',message:'',tags:'',selectedFile:''}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var post=useSelector(function(state){return currentId?state.posts.find(function(message){return message._id===currentId;}):null;});var dispatch=useDispatch();var classes=useStyles();useEffect(function(){if(post)setPostData(post);},[post]);var clear=function clear(){setCurrentId(0);setPostData({creator:'',title:'',message:'',tags:'',selectedFile:''});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(currentId===0){dispatch(createPost(postData));clear();}else{dispatch(updatePost(currentId,postData));clear();}case 2:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:currentId?\"Editing \\\"\".concat(post.title,\"\\\"\"):'Creating a Memory'}),/*#__PURE__*/_jsx(TextField,{name:\"creator\",variant:\"outlined\",label:\"Creator\",fullWidth:true,value:postData.creator,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{creator:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,multiline:true,rows:4,value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags (coma separated)\",fullWidth:true,value:postData.tags,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(',')}));}}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref3){var base64=_ref3.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true,children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true,children:\"Clear\"})]})});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Typography","Paper","useDispatch","useSelector","FileBase","useStyles","createPost","updatePost","Form","currentId","setCurrentId","creator","title","message","tags","selectedFile","postData","setPostData","post","state","posts","find","_id","dispatch","classes","clear","handleSubmit","e","preventDefault","paper","root","form","target","value","split","fileInput","base64","buttonSubmit"],"sources":["D:/DBMS-PROJECT/client/src/components/Form/Form.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TextField, Button, Typography, Paper } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport FileBase from 'react-file-base64';\r\n\r\nimport useStyles from './styles';\r\nimport { createPost, updatePost } from '../../actions/posts';\r\n\r\nconst Form = ({ currentId, setCurrentId }) => {\r\n  const [postData, setPostData] = useState({ creator: '', title: '', message: '', tags: '', selectedFile: '' });\r\n  const post = useSelector((state) => (currentId ? state.posts.find((message) => message._id === currentId) : null));\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (post) setPostData(post);\r\n  }, [post]);\r\n\r\n  const clear = () => {\r\n    setCurrentId(0);\r\n    setPostData({ creator: '', title: '', message: '', tags: '', selectedFile: '' });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (currentId === 0) {\r\n      dispatch(createPost(postData));\r\n      clear();\r\n    } else {\r\n      dispatch(updatePost(currentId, postData));\r\n      clear();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <form autoComplete=\"off\" noValidate className={`${classes.root} ${classes.form}`} onSubmit={handleSubmit}>\r\n        <Typography variant=\"h6\">{currentId ? `Editing \"${post.title}\"` : 'Creating a Memory'}</Typography>\r\n        <TextField name=\"creator\" variant=\"outlined\" label=\"Creator\" fullWidth value={postData.creator} onChange={(e) => setPostData({ ...postData, creator: e.target.value })} />\r\n        <TextField name=\"title\" variant=\"outlined\" label=\"Title\" fullWidth value={postData.title} onChange={(e) => setPostData({ ...postData, title: e.target.value })} />\r\n        <TextField name=\"message\" variant=\"outlined\" label=\"Message\" fullWidth multiline rows={4} value={postData.message} onChange={(e) => setPostData({ ...postData, message: e.target.value })} />\r\n        <TextField name=\"tags\" variant=\"outlined\" label=\"Tags (coma separated)\" fullWidth value={postData.tags} onChange={(e) => setPostData({ ...postData, tags: e.target.value.split(',') })} />\r\n        <div className={classes.fileInput}><FileBase type=\"file\" multiple={false} onDone={({ base64 }) => setPostData({ ...postData, selectedFile: base64 })} /></div>\r\n        <Button className={classes.buttonSubmit} variant=\"contained\" color=\"primary\" size=\"large\" type=\"submit\" fullWidth>Submit</Button>\r\n        <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={clear} fullWidth>Clear</Button>\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}